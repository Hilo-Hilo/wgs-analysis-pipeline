# WGS Analysis Pipeline Configuration - Cloud Profile
# Optimized for cloud computing environments (AWS, GCP, Azure)
# Target: Variable resources, cost optimization, ephemeral storage

# System Resource Configuration
PROFILE_NAME="cloud"
PROFILE_DESCRIPTION="Cloud computing optimization (cost-aware)"
MAX_MEMORY_GB=64
MAX_THREADS=16

# Thread Configuration (Cost-Optimized)
FASTP_THREADS=8
BWA_THREADS=16
SAMTOOLS_THREADS=8
BCFTOOLS_THREADS=8
FASTQC_THREADS=4

# Memory Limits (Cost-Aware)
BWA_MEM_LIMIT="32G"
SAMTOOLS_MEMORY="16G"
JAVA_MEMORY="-Xmx16g"

# Quality Control Settings (Efficient)
FASTP_QUALITY_THRESHOLD=25
FASTP_MIN_LENGTH=75
FASTP_UNQUALIFIED_PERCENT_LIMIT=20

# Processing Settings
BWA_BATCH_SIZE=20000000  # Optimized for cloud I/O
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=4      # Balanced for network transfer

# Temporary Directory Management
USE_LOCAL_TMP=true        # Use instance storage
CLEANUP_INTERMEDIATE=true # Clean up to save storage costs
MAX_TEMP_SIZE_GB=200

# Monitoring Settings
RESOURCE_MONITOR_INTERVAL=20
MEMORY_WARNING_THRESHOLD=90
DISK_WARNING_THRESHOLD=85

# Output Settings
KEEP_INTERMEDIATE_FILES=false  # Save storage costs
GENERATE_QC_PLOTS=true
DETAILED_LOGGING=true

# Pipeline Behavior
ENABLE_CHECKPOINTS=true        # Critical for preemptible instances
AUTO_RESUME=true
FAIL_ON_WARNING=false
VALIDATION_LEVEL="standard"

# Disk Management
ENABLE_DISK_MONITORING=true
MIN_DISK_SPACE_GB=100
AUTO_CLEANUP_ON_SUCCESS=true   # Cost optimization

# Notification Settings
ENABLE_NOTIFICATIONS=true      # Important for cloud monitoring
PROGRESS_UPDATES=true
QUIET_MODE=false

# Tool-specific optimizations
FASTQC_MEMORY="4096m"
VEP_BUFFER_SIZE=10000
VEP_FORK=8

# Error Handling (Robust for cloud environments)
MAX_RETRIES=3
RETRY_DELAY=180
CONTINUE_ON_ERROR=false

# Cloud-specific Features
ENABLE_PARALLEL_STEPS=true
ENABLE_MEMORY_MAPPING=false    # Avoid for network storage
USE_SHARED_MEMORY=false
ENABLE_SPOT_INSTANCE_HANDLING=true
ENABLE_AUTO_SCALING=false

# Storage Optimization
USE_OBJECT_STORAGE=true
S3_STORAGE_CLASS="STANDARD_IA"
ENABLE_TRANSFER_ACCELERATION=true
MULTIPART_UPLOAD_THRESHOLD="100MB"

# Network Optimization
ENABLE_BANDWIDTH_LIMITING=false
MAX_CONCURRENT_UPLOADS=4
RETRY_NETWORK_OPERATIONS=true

# Cost Management
ENABLE_COST_MONITORING=true
MAX_RUNTIME_HOURS=24
AUTO_TERMINATE_ON_COMPLETION=false
ENABLE_RESERVED_CAPACITY=false

# Security (Cloud-specific)
ENABLE_ENCRYPTION_AT_REST=true
ENABLE_ENCRYPTION_IN_TRANSIT=true
USE_IAM_ROLES=true
ENABLE_VPC_ENDPOINTS=true

# Comments
# This profile optimizes for:
# - Cost efficiency in cloud environments
# - Reliability with spot/preemptible instances
# - Network and storage optimization
# - Automatic resource management
# Suitable for: AWS EC2, GCP Compute Engine, Azure VMs, cloud pipelines